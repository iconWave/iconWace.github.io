var e=(e,t,a)=>new Promise(((l,n)=>{var i=e=>{try{r(a.next(e))}catch(t){n(t)}},o=e=>{try{r(a.throw(e))}catch(t){n(t)}},r=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,o);r((a=a.apply(e,t)).next())}));import{_ as t,f as a,v as l,a as n}from"./validate.e953a567.js";import{l as i,A as o,ak as r,a1 as s,_ as c,a4 as d,aj as u,j as v,r as m,d as p,a as f,U as b,u as h,C as y,a0 as _,ah as g,ai as x,D as w,z as j,t as k,aw as O,ar as I,ap as C,as as P}from"./antdv.1e116ac1.js";import{_ as z}from"./index.4992d974.js";import{b as M,_ as R}from"./index.754b7dd5.js";const T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},l=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),l.forEach((function(t){q(e,t,a[t])}))}return e}function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var U=function(e,t){var a=S({},e,t.attrs);return i(o,S({},a,{icon:T}),null)};U.displayName="QuestionCircleOutlined",U.inheritAttrs=!1;const A=U;const D=[{title:"序号",dataIndex:"index",key:"toIndex",width:80},{title:"节点",dataIndex:"node_name",width:150},{title:i(u,null,{default:()=>[i(c,{align:"center"},{default:()=>[i("span",null,[d("机构")]),i(A,{style:"vertical-align:2px"},null)]})]}),dataIndex:"institutions_name",width:80},{title:"IP",dataIndex:"ip",width:100,customRender:({record:e})=>i("span",null,[e.ip?`${e.ip}:${e.port}`:""])},{title:"角色",dataIndex:"nodeRole",width:100},{title:"是否管理员",dataIndex:"is_consensus",width:150},{title:"创建时间",dataIndex:"create_time",width:150},{title:"状态",dataIndex:"status",width:150,customRender:({text:e})=>{return i(r,{color:"正常"===e?"success":"error"},"function"==typeof(t=e)||"[object Object]"===Object.prototype.toString.call(t)&&!s(t)?e:{default:()=>[e]});var t}},{title:"操作",key:"action",width:120}],E={class:"node-conatiner"},F=(e=>(g("data-v-e25584bf"),e=e(),x(),e))((()=>w("h2",{class:"nc_title font18"},"网站管理",-1))),V=R(v({__name:"index",setup(o){const r=e=>new Promise((t=>setTimeout((()=>t(!e||!!e)),500))),{createMessage:s}=M(),c=m(),d=m(),u=()=>{var e;return null==(e=d.value)?void 0:e.refresh()},v={style:{width:"110px"}},g={span:17},x=p((()=>[{label:"管理员",value:1},{label:"普通",value:2}])),w=f({loading:!1,visible:!1,title:"创建用户",okText:"创建"}),k={mobile:[{required:!0,trigger:"blur",validator:l}],role_id:[{required:!0,trigger:"change",validator:(e,t)=>t?Promise.resolve():Promise.reject("请选择角色")}]},R=m({mobile:"",role_id:void 0}),T=f([{label:"编辑",onClick:t=>e(this,null,(function*(){w.title="修改用户",w.okText="更新",w.visible=!0,R.value=t}))},{label:"删除",popConfirm:{title:"确认删除吗？",onConfirm:t=>e(this,null,(function*(){(yield r())&&(s.success("删除成功"),u())}))}}]),S=()=>{var e;w.visible=!1,null==(e=c.value)||e.resetFields()},q=()=>{var t;null==(t=c.value)||t.validate().then((()=>e(this,null,(function*(){w.loading=!0;const e=yield r(R.value);w.loading=!1,e&&(s.success(("新增用户"===w.title?"新增":"修改")+"用户成功"),S(),u())})))).catch(console.log)},U=f({role_id:void 0,search:""}),A=f({type:"primary",label:"新增用户",onClick:()=>{w.title="新增用户",w.okText="创建",w.visible=!0}}),V=p((()=>[{type:"select",name:"role_id",placeholder:"请选择角色",options:x.value},{type:"search",name:"search",placeholder:"请输入姓名或账号进行查询",search:()=>{}}]));return(e,l)=>{const o=n,r=z,s=O,u=I,m=C,p=P,f=t;return j(),b("div",E,[F,i(o,{type:"info",message:"Mock + fakerjs 数据模拟基本用法，及Table + filter筛选组件组合用法"}),i(r,{ref_key:"ELRef",ref:d,url:h(a).node_list,columns:h(D),items:h(V),button:A,actions:T,model:U},null,8,["url","columns","items","button","actions","model"]),i(f,_(w,{onCancel:S,onOk:q}),{default:y((()=>[i(p,{ref_key:"FormRef",ref:c,model:R.value,rules:k,"label-col":v,"wrapper-col":g},{default:y((()=>[i(u,{label:"用户:",name:"mobile"},{default:y((()=>[i(s,{value:R.value.mobile,"onUpdate:value":l[0]||(l[0]=e=>R.value.mobile=e),placeholder:"请输入用户手机号"},null,8,["value"])])),_:1}),i(u,{label:"角色:",name:"role_id"},{default:y((()=>[i(m,{value:R.value.role_id,"onUpdate:value":l[1]||(l[1]=e=>R.value.role_id=e),options:h(x),placeholder:"请选择角色"},null,8,["value","options"])])),_:1})])),_:1},8,["model"])])),_:1},16)])}}}),[["__scopeId","data-v-e25584bf"]]);export{V as default};
