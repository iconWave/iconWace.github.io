var e=(e,a,l)=>new Promise(((t,o)=>{var i=e=>{try{n(l.next(e))}catch(a){o(a)}},s=e=>{try{n(l.throw(e))}catch(a){o(a)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,s);n((l=l.apply(e,a)).next())}));import{_ as a,f as l,v as t,a as o}from"./validate.e953a567.js";import{l as i,ak as s,a1 as n,j as r,r as d,d as u,a as c,U as v,u as m,C as p,a0 as f,ah as h,ai as b,D as _,t as x,z as g,aw as w,ar as y,ap as j,as as k}from"./antdv.1e116ac1.js";import{_ as I}from"./index.4992d974.js";import{b as C,_ as P}from"./index.754b7dd5.js";const R=[{title:"IP地址",dataIndex:"ip",width:150},{title:"端口",dataIndex:"host",width:80,customRender:({text:e})=>{return i(s,null,"function"==typeof(a=e)||"[object Object]"===Object.prototype.toString.call(a)&&!n(a)?e:{default:()=>[e]});var a}},{title:"协议",dataIndex:"protocol",width:100},{title:"域名",dataIndex:"domain",width:100},{title:"邮箱",dataIndex:"email",width:150},{title:"地址",dataIndex:"url",width:200,customRender:({text:e})=>i("a",{href:e,target:"_blank"},[e])},{title:"操作",key:"action",width:120}],T={class:"node-conatiner"},F=(e=>(h("data-v-74bc49d3"),e=e(),b(),e))((()=>_("h2",{class:"nc_title font18"},"网站管理",-1))),O=P(r({__name:"index",setup(s){const n=e=>new Promise((a=>setTimeout((()=>a(!e||!!e)),500))),{createMessage:r}=C(),h=d(),b=d(),_=()=>{var e;return null==(e=b.value)?void 0:e.refresh()},x={style:{width:"110px"}},P={span:17},O=u((()=>[{label:"管理员",value:1},{label:"普通",value:2}])),U=c({loading:!1,visible:!1,title:"创建用户",okText:"创建"}),q={mobile:[{required:!0,trigger:"blur",validator:t}],role_id:[{required:!0,trigger:"change",validator:(e,a)=>a?Promise.resolve():Promise.reject("请选择角色")}]},z=d({mobile:"",role_id:void 0}),D=c([{label:"编辑",onClick:a=>e(this,null,(function*(){U.title="修改用户",U.okText="更新",U.visible=!0,z.value=a}))},{label:"删除",popConfirm:{title:"确认删除吗？",onCancel:e=>{},onConfirm:a=>e(this,null,(function*(){(yield n())&&(r.success("删除成功"),_())}))}}]),E=()=>{var e;U.visible=!1,null==(e=h.value)||e.resetFields()},L=()=>{var a;null==(a=h.value)||a.validate().then((()=>e(this,null,(function*(){U.loading=!0;const e=yield n(z.value);U.loading=!1,e&&(r.success(("新增用户"===U.title?"新增":"修改")+"用户成功"),E(),_())})))).catch(console.log)};return(e,t)=>{const s=o,n=I,r=w,d=y,u=j,c=k,_=a;return g(),v("div",T,[F,i(s,{type:"info",message:"Table + action slot 联动表单基本用法"}),i(n,{ref_key:"ELRef",ref:b,url:m(l).page_one_list,columns:m(R),hiddenFilter:!0,actions:D},null,8,["url","columns","actions"]),i(_,f(U,{onCancel:E,onOk:L}),{default:p((()=>[i(c,{ref_key:"FormRef",ref:h,model:z.value,rules:q,"label-col":x,"wrapper-col":P},{default:p((()=>[i(d,{label:"用户:",name:"mobile"},{default:p((()=>[i(r,{value:z.value.mobile,"onUpdate:value":t[0]||(t[0]=e=>z.value.mobile=e),placeholder:"请输入用户手机号"},null,8,["value"])])),_:1}),i(d,{label:"角色:",name:"role_id"},{default:p((()=>[i(u,{value:z.value.role_id,"onUpdate:value":t[1]||(t[1]=e=>z.value.role_id=e),options:m(O),placeholder:"请选择角色"},null,8,["value","options"])])),_:1})])),_:1},8,["model"])])),_:1},16)])}}}),[["__scopeId","data-v-74bc49d3"]]);export{O as default};
